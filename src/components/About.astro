---

---

<div class="relative mx-16 flex-col items-center justify-center">
  <h1 class="text-3xl font-serif font-bold">Welcome to my car site!</h1>
  <div class="relative">
    <svg class="absolute h-full w-full overflow-visible">
     <defs>
        <linearGradient 
        id="gradient" 
        x1="2.00009" 
        y1="50.9998" 
        x2="589" 
        y2="275.5" 
        gradientUnits="userSpaceOnUse">
        <stop offset="0%" style={{ stopColor:"#DC3A2B"}}></stop>
        <stop offset="100%" style={{ stopColor:"#E18510"}}></stop>
        </linearGradient>
      </defs>
      <path 
      id="border-path"
      fill="none"
      stroke="url(#gradient)" 
      stroke-width="4" 
      ></path>
      
    </svg>
    <p id="anim-p" class="p-6 text-lg font-serif">
      Welcome to <span class="font-bold italic">Gear Headz</span>, the ultimate hub for car and motorcycle enthusiasts! Whether you're here to showcase your pride and joy, review the latest mods, or blog about your passion for all things automotive, Gear Headz has you covered. Share photos, swap stories, and connect with fellow gearheads who live and breathe the thrill of the open road. From imports to muscle cars and from street bikes to cruisers, this is where the heart of car culture beats.<br/>
      <br/>
      So join up, and contribute your story!<br/>
      <br/>
      Have Fun!
    </p>
  </div>
  <div class="flex justify-center pt-12 text-center mb-12 xl:gap-16">
    <div class="w-32">
    <h2>Car Gallery</h2>
    <p class="text-xl font-bold"  id="gallery-counter">85</p>
  </div>
    <div class="w-32">
    <h2>Reviews</h2>
    <p class="text-xl font-bold"  id="review-counter">85</p>
  </div>
    <div class="w-32">
    <h2>Blog Posts</h2>
    <p class="text-xl font-bold"  id="blog-counter">85</p>
  </div>
  </div>
  <div class="relative">
    <img class="responsive-image rounded-lg" src='/STI.jpg' alt="sti"/>
  </div>
</div>

<style>
  #border-path{
    animation: draw 1s forwards 1s ease-out;
  }
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  .responsive-image {
    width: 100%; /* Ensure the image takes full width of the container */
    max-width: 600px; /* Set a maximum width for larger screens */
    height: auto; /* Automatically adjust height to maintain aspect ratio */
  }

  @media (max-width: 768px) {
    .mx-12 {
      margin: 0; /* Adjust margins for smaller screens */
    }
    .responsive-image {
      max-width: 100%; /* Ensure it scales down on smaller screens */
    }
  }

  @media (max-width: 480px) {
    .text-3xl {
      font-size: 1.5rem; /* Smaller text size on very small screens */
    }
  }
</style>

<script>
import { sequence } from "astro:middleware"

  function updatePath(){
    const textMain = document.querySelector('#anim-p') as HTMLElement
    const path = document.querySelector('#border-path') as SVGPathElement

    if(textMain && path) {
      path.setAttribute("d", `M0,0 V${textMain.offsetHeight} H${textMain.offsetWidth} v${textMain.offsetHeight / 1/2}`)
    }
    const pathLenght = path.getTotalLength()
    path.style.strokeDasharray = pathLenght.toString()
    path.style.strokeDashoffset = pathLenght.toString()
  }

  function incrementCounter(selector: string, current: number, target: number, duration: number){
    let counter = document.getElementById(selector)
    let stepTime = Math.abs(Math.floor(duration / target))
    if (current < target && counter) {
      current++
      counter.innerText = current.toString()
      setTimeout(() => incrementCounter(selector, current, target, duration), stepTime)
    }
  }
  incrementCounter('gallery-counter',0, 4000, 1000)
  incrementCounter('review-counter', 0, 150, 1000)
  incrementCounter('blog-counter', 0, 92, 1000)
  
  window.addEventListener('DOMContentLoaded', updatePath)
  window.addEventListener('resize', updatePath)
</script>
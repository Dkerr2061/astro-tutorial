---

---

<div class="relative mx-12 flex-col items-center justify-center">
  <h1 class="text-3xl font-serif font-bold">Welcome to my car site!</h1>
  <div class="relative">
    <svg class="absolute h-full w-full overflow-visible">
     <defs>
        <linearGradient 
        id="gradient" 
        x1="2.00009" 
        y1="50.9998" 
        x2="589" 
        y2="275.5" 
        gradientUnits="userSpaceOnUse">
        <stop offset="0%" style={{ stopColor:"#DC3A2B"}}></stop>
        <stop offset="100%" style={{ stopColor:"#E18510"}}></stop>
        </linearGradient>
      </defs>
      <path 
      id="border-path"
      fill="none"
      stroke="url(#gradient)" 
      stroke-width="4" 
      ></path>
      
    </svg>
    <p id="anim-p" class="p-6 text-lg font-serif">
      Welcome to <span class="font-bold italic">Gear Headz</span>, the ultimate hub for car and motorcycle enthusiasts! Whether you're here to showcase your pride and joy, review the latest mods, or blog about your passion for all things automotive, Gear Headz has you covered. Share photos, swap stories, and connect with fellow gearheads who live and breathe the thrill of the open road. From imports to muscle cars and from street bikes to cruisers, this is where the heart of car culture beats.<br/>
      <br/>
      So join up, and contribute your story!<br/>
      <br/>
      Have Fun!
    </p>
  </div>
  <div class="flex justify-center pt-12 text-center mb-12 xl:gap-16">
    <div class="w-32">
    <h2>Car Gallery</h2>
    <p class="text-xl font-bold"  id="gallery-counter">85</p>
  </div>
    <div class="w-32">
    <h2>Reviews</h2>
    <p class="text-xl font-bold"  id="review-counter">85</p>
  </div>
    <div class="w-32">
    <h2>Blog Posts</h2>
    <p class="text-xl font-bold"  id="blog-counter">85</p>
  </div>
  </div>
  <div class="relative">
    <img class="h-full rounded-lg" src='/STI.jpg' alt="sti"/>
  </div>
</div>

<style>
  #border-path{
    animation: draw 1s forwards 1s ease-out;
  }
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>

<script>
import { sequence } from "astro:middleware"

  function updatePath(){
    const textMain = document.querySelector('#anim-p') as HTMLElement
    const path = document.querySelector('#border-path') as SVGPathElement

    if(textMain && path) {
      path.setAttribute("d", `M0,0 V${textMain.offsetHeight} H${textMain.offsetWidth} v${textMain.offsetHeight / 1/2}`)
    }
    const pathLenght = path.getTotalLength()
    path.style.strokeDasharray = pathLenght.toString()
    path.style.strokeDashoffset = pathLenght.toString()
  }

  function incrementCounter(selector: string, current: number, target: number, duration: number){
    let counter = document.getElementById(selector)
    let stepTime = Math.abs(Math.floor(duration / target))
    if (current < target && counter) {
      current++
      counter.innerText = current.toString()
      setTimeout(() => incrementCounter(selector, current, target, duration), stepTime)
    }
  }
  incrementCounter('gallery-counter',0, 4000, 2000)
  incrementCounter('review-counter', 0, 150, 2000)
  incrementCounter('blog-counter', 0, 92, 2000)
  
  window.addEventListener('DOMContentLoaded', updatePath)
  window.addEventListener('resize', updatePath)
</script>